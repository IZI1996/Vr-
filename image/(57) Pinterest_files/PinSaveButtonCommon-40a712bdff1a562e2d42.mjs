(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinSaveButtonCommon",23,"PinRepEditButtonCommon"],{"2WXK":function(e,t,n){var r=n("q1tI");let o=null,i=!1,a=0;const s=()=>{o&&clearTimeout(o),i=!0,o=setTimeout(()=>{i=!1},100)};t.a=()=>{const[e,t]=Object(r.useState)(!1),n=Object(r.useRef)(null);Object(r.useEffect)(()=>(0===a&&window.addEventListener("scroll",s),a+=1,()=>{n.current&&clearTimeout(n.current),a-=1,a||window.removeEventListener("scroll",s)}),[]);const o=e=>{n.current&&clearTimeout(n.current),n.current=e&&i?setTimeout(()=>o(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:Object(r.useRef)({onMouseOver:()=>o(!0),onMouseLeave:()=>o(!1)}).current}}},"2qKt":function(e,t,n){var r=n("q1tI"),o=n("/MKj"),i=n("Y+p1"),a=n.n(i),s=(n("17x9"),n("Vzit")),c=n("vh5K"),l=n("pLLR"),u=n("ANjH"),d=n("nKUr");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1};t.a=(e,t={},n)=>i=>{const f=function(e){return t=>({experience:t.experiences.eligibleExperiences[e],experiencesMulti:t.experiences.experiencesMulti?t.experiences.experiencesMulti[e]:void 0})}(e);n={...h,...n};const b=function(e,t,n=!0,o=!0,i=!1,l){var u,h;return h=u=class extends r.Component{constructor(e){super(e),p(this,"state",{extraContext:void 0}),p(this,"setExtraContextState",e=>{a()(this.state.extraContext,e)||this.setState({extraContext:e})})}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(n,r){const{dispatch:o,experience:i}=this.props;let c=r.extraContext,l=this.state.extraContext||t||{};"function"==typeof t&&(c=t(n,r.extraContext||{}),l=t(this.props,this.state.extraContext||{})),l&&Object.keys(l).length>0&&!a()(c,l)&&o(Object(s.c)(e,l)),!i||n.experience&&i.id===n.experience.id||o(Object(s.k)(e,l))}componentWillUnmount(){const{dispatch:t}=this.props;t(Object(s.m)(e))}dispatchPlacementMount(){const{dispatch:n}=this.props,r="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},o=i&&null!=r&&r.advertiser_id?{advertiserId:r.advertiser_id}:void 0;n(Object(s.l)(e,r,o))}render(){const{experience:e,experiencesMulti:t}=this.props,n={[i?"advertiserExperience":"experience"]:Object(c.e)(e)?e:null};return Object(d.jsx)(l,{...this.props,setPlacementExtraContext:this.setExtraContextState,...n,experiencesMulti:t})}},p(u,"displayName",`withPlacement(${l.displayName||l.name||"Component"})`),h}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,n.isAdvertiserPlacement,i);return Object(u.compose)(l.e,Object(o.connect)(f))(b)}},"5FNA":function(e,t,n){n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("qtKf"),o=n("Pqnw"),i=n("Wer7");const a=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:n,username:r})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:r,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},c=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),l=e=>a.reduce((t,n)=>{const a=[Object(o.a)("profileBoards",Object(r.c)(e,n))];return[!0,!1].forEach(t=>{[!0,!1].forEach(r=>{a.push(Object(i.f)(s.name,s.options({username:e,boardOrder:n,mixPublicSecret:t,filterStories:r})))})}),t.concat(a)},[])},"5uyJ":function(e,t,n){n.d(t,"a",(function(){return r}));const r={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},"82UD":function(e,t,n){var r=n("q1tI"),o=n("/MKj"),i=n("T+9/"),a=n("ajUs"),s=n("ou9u"),c=n("hFNL"),l=n("qD10"),u=n("yKES"),d=n("5uyJ"),p=n("n6mq"),h=n("nKUr");const f={overlay:{__style:{backgroundColor:"#000"}}};function b(e){const{pin:{id:t,images:n,title:o,videos:i,video_status_message:a}}=e,s=a||{},c=n&&n["236x"],b=i&&i.video_list[d.a.V_HLSV4],{duration:m}=b||{};return Object(h.jsx)(r.Fragment,{children:Object(h.jsx)(p.i,{children:Object(h.jsxs)(l.a,{to:"/pin/"+t,children:[Object(h.jsxs)(p.e,{overflow:"hidden",position:"relative",rounding:2,children:[c&&Object(h.jsx)(p.x,{alt:o||"",color:"lightGray",naturalHeight:c.height,naturalWidth:c.width,src:c.url}),!!m&&Object(h.jsx)(p.e,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:Object(h.jsx)(u.a,{duration:m})}),Object(h.jsx)(p.e,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:f.overlay}),Object(h.jsxs)(p.e,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[Object(h.jsx)(p.u,{color:"white",overflow:"normal",size:"sm",children:s.title}),Object(h.jsx)(p.e,{marginTop:4,children:Object(h.jsx)(p.Y,{color:"white",size:"md",overflow:"normal",children:s.subtitle})})]})]}),Object(h.jsx)(p.e,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:Object(h.jsx)(p.e,{flex:"grow",children:o&&Object(h.jsx)(p.e,{paddingY:1,children:Object(h.jsx)(p.Y,{inline:!0,size:"md",weight:"bold",children:o})})})})]})})})}var m=n("Y8Sn"),v=n("vpxy"),_=n("0nTG");t.a=Object(o.connect)((function({pins:e},{pin:t,pinId:n}){return{reduxPin:e[n]||t}}),()=>({}))((function({reduxPin:e,trackingParameters:t,...n}){const l=Object(o.useSelector)(({location:e})=>e),u=Object(a.a)(e,l),d=Object(s.a)(e),p=!!(d&&d.url&&d.height&&d.width)||void 0,f=d&&e.videos?e.videos.id:void 0,[g,j]=Object(r.useState)(!1),x=Object(r.useCallback)(()=>j(!0),[]),O=Object(r.useCallback)(()=>j(!1),[]),{componentType:y,contextLogData:S,impressionAuxFields:E,slotIndex:C,viewData:w,viewParameter:P,viewType:I}=t;return Object(h.jsx)(i.a,{componentType:y,contextLogData:{..."undefined"!=typeof window?{pwa_type:Object(c.b)(window)}:{},...S,...Object(_.f)(e,S)},impressionAuxFields:{...E||{},isNativeVideoAndWatchable:p,videoIdStr:f,clientTrackingParams:u||(e.tracking_params||"")+"-0",imageURL:e.images&&e.images["236x"].url,richTypes:Object(_.e)(e)},impressionType:"Pin",isPaused:!g,loggingId:e.id,slotIndex:C,viewData:w,viewParameter:P,viewType:I,children:Object(m.h)(e)?Object(h.jsx)(b,{pin:e}):Object(h.jsx)(v.a,{...n,debugImpressionState:g?"started":"paused",onError:O,onLoad:x,pin:e,trackingParameters:{componentType:y,contextLogData:S,slotIndex:C,viewParameter:P,viewType:I}})})}))},AAEI:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("/MKj"),o=n("ANjH"),i=n("vh5K"),a=n("Vzit");function s(e){const t=Object(r.useDispatch)(),n=Object(r.useSelector)(e=>e.experiences.eligibleExperiences),s=Object(r.useSelector)(e=>e.experiences.mountedPlacements);return{experienceForPlacement:e?Object(i.c)(n,s,e):null,...Object(o.bindActionCreators)({completeExperience:a.a,dismissExperience:a.b,fetchAllExperiences:a.d,fetchExperienceForPlacement:a.c,triggerExperimentsForPlacement:a.k,viewExperience:a.j},t)}}},DzJC:function(e,t,n){var r=n("sEfC"),o=n("GoyQ");e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:i,maxWait:t,trailing:a})}},MNxV:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("XRfM"),o=n("pLLR"),i=n("nKUr");const a=r.b.DateFormatType;t.b=({dateFormatType:e,useUTC:t=!0,value:n})=>Object(i.jsx)(o.b,{children:o=>r.b.formatDate(o.locale,n,e,t)})},NdXn:function(e,t,n){function r(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}n.d(t,"a",(function(){return r}))},NjDU:function(e,t,n){function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function i(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function a(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return c}));const s=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),c=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}})},PNKV:function(e,t,n){},Pqnw:function(e,t,n){function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",(function(){return r}))},WnNx:function(e,t,n){function r(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function o(){return{type:"HIDE_REPIN_ANIMATION"}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},Wrea:function(e,t,n){n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("Wer7");const o=(e,t)=>n=>n(Object(r.a)("BoardResource",{board_id:e,field_set_key:t})),i=e=>o(e,"pin_count"),a=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),s=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),c=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),l=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},ZE2w:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("4dcN"),o=n("eOdZ");const i="collaborator_approve_invite";function a(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function s(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return n=>o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{r.a.trackEvent(i,"success")}).catch(()=>r.a.trackEvent(i,"error"))}function l(e,t,n){return t=>{const{invited_user:r,status:i,board:{id:a}}=e;return o.a.create("accepted"===i?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:a,field_set_key:"boardEdit",invited_user_id:r.id}).callDelete({showError:!1})}}},c50B:function(e,t,n){n.d(t,"o",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"m",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"q",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return _})),n.d(t,"s",(function(){return g})),n.d(t,"p",(function(){return j})),n.d(t,"k",(function(){return x})),n.d(t,"r",(function(){return O})),n.d(t,"t",(function(){return y}));const r=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach((e,r)=>{const o=t[e];o&&(n[r]=o)}),n.join("")};function o(e){return function(t,n){const r=[];t&&/\S/.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}const i=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function a(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(i)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function s(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function c(e){return function(t,n){const o=r(t.trim()),i=[];o&&""!==o&&o.length<2&&i.push(e.ageTooShortString);const a=Math.floor(parseInt(o,10));""===o||/^\d+$/.test(o)&&a>0&&a<300||i.push(e.invalidAgeString);const s={errors:i,warnings:[]};return n&&n(s),s}}function l(e){return function(t,n){const r=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),o=[],i=!1!==e.checkLength&&r.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!i||o.push(e.message);const a={errors:o,warnings:[]};return n&&n(a),a}}function u(e){return function(t,n){const o=/^\d+$/,i=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(o)&&i.push(e.message));const a={errors:i,warnings:[]};return n&&n(a),a}}function d(e){return function(t,n){const o=/^[\d\ -]+$/,i=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(o)&&i.push(e.message));const a={errors:i,warnings:[]};return n&&n(a),a}}function p(e){return function(t,n){const r=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function h(e){return function(t,n){const r=[];(e.should_trim||!1)&&(t=t&&t.trim());const o=t.length;e.min&&o<e.min?r.push(e.minErrorString):e.max&&o>e.max&&r.push(e.maxErrorString);const i={errors:r,warnings:[]};return n&&n(i),i}}function f(e){return function(t,n){const r=[];t!==(e&&e.targetValue)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function b(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<=e.value&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function m(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<e.value&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function v(e){return function(t,n){const r=[];/^[\040-\176]*$/.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function _(e){return function(t,n){const r=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,o=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(r)&&(t=t&&t.trim(),o.push(e.message));const i={errors:o,warnings:[]};return n&&n(i),i}}function g(e){return function(t,n){t=t&&t.trim();const r=[],o=new Date(t);t&&!o.getTime()&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function j(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function x(e){return function(t,n){const r=[];e.pattern.test(t)||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function O(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}function y(e,t){let n="";return t.some(t=>{const r=t(e);return r.errors.length>0&&(n=r.errors[0],!0)}),n}},dMCU:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("/MKj"),o=n("v/Q4"),i=n("aOj9"),a=n("nKUr");function s(e){const t=t=>{const n=Object(r.useDispatch)(),{isAuth:s,isLimitedLogin:c}=Object(o.a)(),l=Object(i.e)(),u=!s||c?e=>e=>{e&&e.stopPropagation(),l()}:e=>e;return Object(a.jsx)(e,{authAction:u,dispatch:n,isAuth:s,isLimitedLogin:c,...t})};return t.displayName=`WithAuthenticatedAction(${String(e.displayName||e.name)})`,t}},eyRb:function(e,t,n){function r(e){return{type:"UPDATE_PIN_ACTIONS",payload:e}}function o(){return{type:"COMPLETE_APP_INSTALL"}}function i(){return{type:"COMPLETE_PIN_SAVE"}}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}))},gdcG:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("2WXK"),o=n("nKUr");function i(e){return function(t){const{isHovering:n,hoverHandlers:i}=Object(r.a)();return Object(o.jsx)(e,{...t,hoverHandlers:i,isHovering:n})}}},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return s}));var r=n("Ye/N"),o=n("dtqy"),i=n("n6mq"),a=n("nKUr");function s({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:o,wrappingIconStyle:s,shouldUseLegoStyles:c,onDelete:l}){const u=Object(a.jsx)(i.w,{accessibilityLabel:r.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return c?Object(a.jsx)(i.f,{size:"lg",color:"gray",text:r.a._("Saved","PinRepEditButton.SavedButton","saved button on pin"),onClick:l,accessibilityLabel:r.a._("Pin Saved Button","PinRepEditButton.SavedButtonLabel","saved button label on pin"),selected:!0}):n||o?Object(a.jsx)("div",{style:{...s||{}},children:u}):u}t.default=Object(o.a)(s)},oN2T:function(e,t,n){n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"i",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return _})),n.d(t,"m",(function(){return g})),n.d(t,"h",(function(){return x})),n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return y})),n.d(t,"l",(function(){return S})),n.d(t,"j",(function(){return E})),n.d(t,"k",(function(){return C})),n.d(t,"f",(function(){return w}));var r=n("4dcN"),o=n("Pqnw"),i=n("7w6Q"),a=n("eOdZ"),s=n("KFEb"),c=n("5FNA"),l=n("NjDU"),u=n("Wer7");const d="board_create",p="board_delete",h="board_edit";function f(e,t){return Object(u.a)("BoardResource",{board_id:e,field_set_key:t})}function b(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}function m(){return(e,t)=>{const{viewer:n}=t();n.isAuth&&Object(c.b)(n.username).forEach(t=>{e(t)})}}function v(e,t){const n={...e};return o=>(o({type:"BOARD_CREATE",payload:{board:e}}),a.a.create("BoardResource",n).callCreate().then(e=>{r.a.trackEvent(d,"success");const i=e.resource_response.data;return i&&(o(m()),null!=t&&t.isFBC||o(b(n,i))),i}).catch(e=>{throw r.a.trackEvent(d,"error"),e}))}function _(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function g(e){return t=>{const n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},o={board_id:e.id,name:e.name,description:e.description,category:e.category,collaborator_permissions_setting:e.collaborator_permissions_setting,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...n};return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:o}}),a.a.create("BoardResource",o).callUpdate().then(n=>{r.a.trackEvent(h,"success");const i=n&&n.resource_response&&n.resource_response.data||e;t(_(o,i))}).catch(e=>{throw r.a.trackEvent(h,"error"),e})}}function j(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function x(e){return(t,n)=>{const o=n().boards.content[e],{pin_count:i}=o,{id:s}=o.owner;return t({type:"BOARD_DELETE",payload:{boardId:e}}),a.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{r.a.trackEvent(p,"error"),t(j(e)),t(Object(l.b)({userId:s,increment:-i}))}).catch(e=>{throw r.a.trackEvent(p,"error"),e})}}function O(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function y(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),a.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function S(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),a.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function E(e,t){return n=>a.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([n(j(e)),n(f(t,"pin_count")),n(Object(o.a)(s.a.BOARD_SECTIONS,t))]))}function C(e,t){return n=>a.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response){return n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}const r=e.resource_response.data||{},o=(r.model||{}).custom_properties||{},{campaign_id:a="unknown"}=o,s=r.display_data||{},c={isSocialSeasonalBoard:!!r.display_data,socialHeaderBgImage:s.header_image,socialHeaderBgColor:s.header_background_color,textIconColor:s.text_icon_color};return i.a.increment(`web.seasonal_board.${a}.${t}.land`),n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:c})})}function w(){return e=>e({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}},oRM1:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("q1tI"),o=n("zQfT");function i({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:n,resourceName:i,resourceOptions:a,value:s}){const c=Object(o.a)({allowSearchOnMount:e,resourceName:i,resourceOptions:a,value:s});return Object(r.useEffect)(()=>{c.length&&n(c)},[c]),t||null}},ou9u:function(e,t,n){function r(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}n.d(t,"a",(function(){return r}))},rO08:function(e,t,n){n.r(t),n.d(t,"PinSaveButton",(function(){return S}));var r=n("q1tI"),o=n("/MKj"),i=n("Ye/N"),a=n("TgLd"),s=n("rYoy"),c=n("dMCU"),l=n("2qKt"),u=n("n6mq"),d=n("eyRb"),p=n("0nTG"),h=n("lm6u"),f=n("B6Tf"),b=n("y9Ij"),m=n("seP0"),v=n("ANjH"),_=n("xjIv"),g=n("EC67"),j=n("nKUr");function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=Object(r.lazy)(()=>n.e("FirstPinCreateCommon").then(n.bind(null,"kj35"))),y=[500639,11022];class S extends r.Component{constructor(e){super(e),x(this,"componentWillUnmount",()=>{this._repinCompletionPromise&&this._repinCompletionPromise.cancel()}),x(this,"setCompletionPromise",e=>{this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(()=>{this.handleRepinHideAndToggle()})}),x(this,"_repinCompletionPromise",null),x(this,"handleRepinHideAndToggle",()=>{this.setState({isRepinModalOpen:!1});const{onToggleModal:e}=this.props;e&&e(!1)}),x(this,"handleSaveButtonClick",({shouldStopEventPropagation:e=!0}={shouldStopEventPropagation:!0})=>this.props.authAction(t=>{t&&(t.preventDefault(),e&&t.stopPropagation());const{onClickCallback:n,onToggleModal:r,oneTapSave:o,boardPickerStopwatch:i,pathname:a}=this.props;n&&n(),o?o.saved||"function"!=typeof o.save||o.save():(i&&(i.start(),Object(m.b)(i,a)),r&&r(!0),this.setState({isRepinModalOpen:this.props.isAuth}))})),x(this,"handleUnsaved",()=>{const{unsave:e,pin:t}=this.props;e(t.id)}),x(this,"handleBoardEdited",({boardId:e,title:t,url:n})=>{const{pin:r,save:o}=this.props;o(r.id,e,t,n)}),x(this,"handleSavedButtonClick",()=>{const{history:e,pin:t,pinSavedInfo:n,viewerId:r}=this.props;let o;t.pinner.id===r?o=t.board.url:n&&(o=n.url),o&&e.push(o)}),x(this,"saveButtonRef",Object(r.createRef)()),x(this,"renderPinToBoardRepin",()=>{const{isCloseupPin:e,onToggleModal:t,pin:n}=this.props,{isFPE:r,isRepinModalOpen:o}=this.state;return o&&r?this.renderFPE():r?null:Object(j.jsx)(h.a,{action:"repin",additionalCreateFields:{is_stl_pin:Object(p.i)(n)},onClose:this.handleRepinHideAndToggle,setCompletionPromise:this.setCompletionPromise,shouldShowToast:!0,onToggleModal:t,pin:n,children:({dismissModal:t,displaySuccessAnimation:r,handleAbort:i,handleNewBoardAnimationCompletion:a,handleSocialConnectSet:s,handleSaveToBoard:c,newPin:l,updateDescription:u,modalTitle:d,setModalTitle:p})=>Object(j.jsx)(f.d,{dismissModal:t,displaySuccessAnimation:r,handleAbort:i,handleNewBoardAnimationCompletion:a,handleSaveToBoard:c,handleSocialConnectSet:s,isCloseupPin:e,isInModal:!0,modalTitle:d,newPin:l,pin:n,pwtAuxData:{pin_create_method:"repin"},setModalTitle:p,shouldRenderContent:o,updateDescription:u})})});const{experience:t,showRepinOnInitialRender:n}=e;this.state={isFPE:!!t&&y.includes(t.experience_id),isRepinModalOpen:n||!1}}componentDidMount(){const{onMount:e}=this.props;e&&e()}isFPERemoved(e){const{isFPE:t}=this.state,{experience:n}=e;return t&&(!n||!y.includes(n.experience_id))}renderFPE(){const{completePinSave:e,experience:t,pin:n}=this.props;return Object(j.jsx)(a.b,{accessibilityModalLabel:i.a._("Create board","Accessible create board education modal label","Accessible create board education modal label"),heading:i.a._("Create board","Create board education modal label","Create board education modal label"),onDismiss:this.handleRepinHideAndToggle,size:"lg",children:Object(j.jsx)(u.e,{dangerouslySetInlineStyle:{__style:{marginBottom:64}},children:Object(j.jsx)(s.a,{children:Object(j.jsx)(r.StrictMode,{children:Object(j.jsx)(O,{anchorRef:this.saveButtonRef.current,experience:t,isInModal:!0,onClose:this.handleRepinHideAndToggle,onComplete:e,pin:n,pwtAuxData:{pin_create_method:"repin"}})})})})})}render(){const{iconOnly:e,isCloseupPin:t,oneTapSave:n,onToggleModal:o,pin:i,renderPinSaveTooltip:a,renderSavedStatus:s,variant:c,viewerId:l,viewParameter:d}=this.props,p=!!(i.pinner.id===l||i.saved||i.savedInfo||"controlled"===(null==n?void 0:n.type)&&n.saved),h="controlled"===(null==n?void 0:n.type)?"controlled":"classic";return Object(j.jsxs)(r.Fragment,{children:[Object(j.jsxs)(u.e,{ref:this.saveButtonRef,children:[t?Object(j.jsx)(b.a,{iconOnly:e,isCloseupPin:t,isPulsarDisplayed:!this.state.isRepinModalOpen,onClick:this.handleSaveButtonClick({shouldStopEventPropagation:!1}),onSavedClick:this.handleSavedButtonClick,saveButtonType:h,saved:p,variant:c}):Object(j.jsx)(b.b,{carouselData:i.carousel_data,iconOnly:e,isCloseupPin:t,onBoardUpdated:this.handleBoardEdited,onClick:this.handleSaveButtonClick({shouldStopEventPropagation:!0}),onSavedClick:this.handleSavedButtonClick,onToggleModal:o,onUnsaved:this.handleUnsaved,renderSavedStatus:s,saveButtonType:h,saved:p,savedInfo:i.savedInfo,variant:c,viewParameter:d}),this.renderPinToBoardRepin()]}),!!a&&this.saveButtonRef.current&&a(this.saveButtonRef.current)]})}}x(S,"defaultProps",{anchorString:""}),t.default=Object(v.compose)(Object(o.connect)((function({pins:e,viewer:t},{pin:n}){return{email:t.isAuth?t.email:void 0,isAuth:t.isAuth,pinSavedInfo:e[n.id]&&e[n.id].savedInfo,viewerId:t.isAuth?t.id:""}}),(function(e){return{completePinSave:()=>e(Object(d.b)()),save:(t,n,r,o)=>e(Object(_.a)(t,n,r,o)),unsave:t=>e(Object(_.b)(t))}})),c.a,Object(l.a)(33),g.k)((function(e){const t=Object(m.c)(),{pathname:n}=Object(g.h)();return Object(j.jsx)(S,{...e,boardPickerStopwatch:t,pathname:n})}))},rVUJ:function(e,t,n){var r,o,i,a=n("q1tI"),s=n("/MKj"),c=n("BcvT"),l=n("n6mq"),u=n("nKUr");class d extends a.Component{renderPulsar(){const{anchor:e,handleComplete:t,zIndex:n}=this.props;return Object(u.jsx)(c.a,{anchor:e,onTouch:t,zIndex:n})}renderFlyout(){const{anchor:e,overflow:t,tooltip:n,handleDismiss:r,handleComplete:o}=this.props;if(!n)return null;const{cancelButtonText:i,confirmButtonText:a,mainText:s,idealDirection:c="down"}=n,d=i&&r&&a&&o;return Object(u.jsx)(l.s,{anchor:e,color:"blue",idealDirection:c,onDismiss:r,shouldFocus:!1,showCaret:!0,size:"flexible",children:Object(u.jsxs)(l.e,{maxWidth:284,padding:3,width:"max-content",children:[Object(u.jsx)(l.Y,{color:"white",overflow:t,weight:"bold",children:s}),d?Object(u.jsxs)(l.e,{marginTop:2,display:"flex",alignItems:"center",children:[Object(u.jsx)(l.e,{column:6,marginEnd:1,children:Object(u.jsx)(l.f,{color:"transparentWhiteText",onClick:e=>r(e),size:"md",text:String(i)})}),Object(u.jsx)(l.e,{column:6,children:Object(u.jsx)(l.f,{color:"white",size:"md",text:String(a),onClick:o})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}i={overflow:"breakWord"},(o="defaultProps")in(r=d)?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i;var p=n("NdXn"),h=n("AAEI"),f=n("gC5q");t.a=({anchor:e,anchorElementRef:t,children:n,containerBoxConfig:r,experience:o,isHidden:i,onCompleteClick:c,overflow:b,zIndex:m})=>{var v;const _=(({anchor:e,anchorExperiences:t,passedExperience:n})=>n||(t?t[e]:null))({anchor:e,anchorExperiences:Object(s.useSelector)(({experiences:e})=>null==e?void 0:e.anchorExperiences),passedExperience:o}),g=Object(h.a)(null==_?void 0:_.placement_id),j=(null==_||null===(v=_.display_data)||void 0===v?void 0:v.delay)||0,[x,O]=Object(a.useState)(!!j);if(Object(a.useEffect)(()=>{if(j>0&&x){const e=setTimeout(()=>{O(!1)});return()=>clearTimeout(e)}return()=>{}},[j,x]),Object(a.useEffect)(()=>{!x&&_&&g.viewExperience(_.placement_id,_.experience_id)},[x,_]),!_||x||i)return a.Children.only(n);const y=(e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),Object(f.a)(p.a,!0)(t)})(_);return Object(u.jsxs)(l.e,{position:"relative",height:null==r?void 0:r.height,display:null==r?void 0:r.display,children:[Object(u.jsx)(l.X,{onMouseEnter:()=>{var e;null!==(e=_.display_data)&&void 0!==e&&e.complete_on_hover&&g.completeExperience(_.placement_id,_.experience_id)},onTap:()=>{c&&c(),y.skipComplete||g.completeExperience(_.placement_id,_.experience_id)},children:a.Children.only(n)}),Object(u.jsx)(d,{anchor:t||null,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),g.dismissExperience(_.placement_id,_.experience_id)},overflow:b,pulserOnly:!!y.pulserOnly,tooltip:y.tooltip,tooltipOnly:!!y.tooltipOnly,zIndex:m})]})}},uyxo:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("jHGc"),o=n("n6mq"),i=n("nKUr");function a(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:a,onEditSubmit:s,onToggleModal:c,pinId:l,variant:u,viewParameter:d,shouldUseLegoStyles:p}=e,h="pin"===u?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return Object(i.jsxs)(o.e,{display:"flex",direction:"row",alignItems:"center",width:"closeup"===u?"100%":void 0,paddingX:"closeup"!==u||p?void 0:2,marginStart:"pin"===u?-1:void 0,marginEnd:"pin"===u?-1:void 0,children:[t&&Object(i.jsx)(o.e,{paddingX:1,"data-test-id":"saved-info",flex:"grow",children:t}),Object(i.jsx)(o.e,{paddingX:1,flex:"none",marginStart:"auto",children:Object(i.jsx)(r.default,{component:0,onDelete:a,onSubmit:s,pinId:l,onToggleModal:c,viewParameter:d,carouselSlotCurrentIndex:n,style:h,shouldUseLegoStyles:p,useLegoStyles:"pin"===u})})]})}},y9Ij:function(e,t,n){n.d(t,"a",(function(){return h}));var r=n("q1tI"),o=n("/MKj"),i=(n("PNKV"),n("TSYQ")),a=n.n(i),s=n("rVUJ"),c=n("Ye/N"),l=n("uyxo"),u=n("n6mq"),d=n("nKUr");const p=Object(r.memo)(Object(r.forwardRef)(({carouselData:e,disabled:t=!1,iconOnly:n,isCloseupPin:r,onBoardUpdated:o,onClick:i,onSavedClick:s,onToggleModal:p,onUnsaved:h,renderSavedStatus:f,saveButtonType:b="classic",saved:m,savedInfo:v,variant:_="classic",viewParameter:g},j)=>m&&"controlled"===b?Object(d.jsx)(u.f,{disabled:!0,text:c.a._("Saved"),size:"sm"}):!r&&v&&f&&h&&o&&"classic"===b?Object(d.jsx)(l.a,{currentCarouselIndex:e&&e.index,onDeleteSavedState:h,onEditSubmit:o,onToggleModal:p,pinId:v.localPinId,variant:"pin",viewParameter:g,children:f()}):m&&"classic"===b&&r?Object(d.jsx)(u.f,{accessibilityLabel:c.a._("Saved button","saveButton.saved.label","Saved state label on save button"),text:c.a._("Saved!","saveButton.saved","Saved state text on save button"),size:"md",color:"white",onClick:s}):n?Object(d.jsx)("div",{ref:j,"data-test-id":"SaveButton",children:Object(d.jsx)(u.w,{accessibilityLabel:c.a._("Save","Accessibility label for the save button","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>i(e),iconColor:"darkGray"})}):Object(d.jsx)(u.e,{display:r?void 0:"flex",justifyContent:"end",children:Object(d.jsx)("div",{ref:j,className:a()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===_}),"data-test-id":"SaveButton",onClick:t?void 0:i,onKeyPress:t?void 0:e=>{32!==e.charCode&&13!==e.charCode||(e.preventDefault(),i(e))},role:"button",tabIndex:"0",children:Object(d.jsx)("div",{className:a()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===_}),children:Object(d.jsx)(u.e,{alignItems:"center",minHeight:40,dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex",children:Object(d.jsx)(u.Y,{color:t?"gray":"white",size:"lego"===_?"sm":"md",weight:"bold",children:Object(d.jsx)("span",{className:a()("SaveButton__label",{"SaveButton__label--lego":"lego"===_}),children:c.a._("Save","Pin save button label","Pin save button label")})})})})})}))),h=({isPulsarDisplayed:e,...t})=>{const[n,i]=Object(r.useState)(null),a=Object(o.useSelector)(({experiences:e})=>{const t=null==e?void 0:e.eligibleExperiences[12];return 501370===(null==t?void 0:t.experience_id)?t:void 0}),c=Object(r.useCallback)(e=>{i(e)},[n]);return Object(d.jsx)(s.a,{anchor:".PinActionBar .repin.pinActionBarButton",anchorElementRef:n,experience:a,isHidden:!e,children:Object(d.jsx)(p,{ref:c,...t})})};t.b=p},yKES:function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("Ye/N"),o=n("US8k"),i=n("n6mq"),a=n("nKUr");function s({duration:e}){return Object(a.jsxs)(i.e,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[Object(a.jsx)(i.v,{accessibilityLabel:r.a._("Video camera icon","Video camera indicator icon for a Pin","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),Object(a.jsx)(i.e,{marginStart:1,children:Object(a.jsx)(i.Y,{color:"white",size:"sm",truncate:!0,children:Object(o.a)(e)})})]})}},zQfT:function(e,t,n){n.d(t,"a",(function(){return l}));var r=n("q1tI");const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},i=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};i.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},i.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},i.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},i.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},i.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var a=i,s=n("eOdZ");function c({resourceName:e,resourceOptions:t}){const n={...t,count:"count"in t?t.count:5},r=s.a.create(e,n),o=new a,i=()=>{r.abort()};return async function(e){const t=o.get(e);if(t){const n=t.items;if(n&&n.length){i();return{hint:t.hint,items:n,term:e}}}return e.length>=0?(async e=>{if(r.isCalling()){var t;if(e===(null===(t=r.options)||void 0===t?void 0:t.term))return;i()}const{bookmarks:n,...a}=r.options||{};r.options={...a,term:e};const s=(await r.callGet({showError:!1})).resource_response.data,c=s.items,l=s.hint||{},u={hint:l,items:c};return o.set(e,u),{term:e,items:c,hint:l}})(e):{hint:{},items:[],term:e}}}function l({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:n={},value:o}){const i=Object(r.useRef)(!1),a=Object(r.useRef)({}),[s,l]=Object(r.useState)([]),u=function({resourceName:e,resourceOptions:t}){const n=Object(r.useRef)();return n.current||(n.current=c({resourceName:e,resourceOptions:t})),n.current}({resourceName:t,resourceOptions:n});return Object(r.useEffect)(()=>{(async()=>{if(null!=o&&(e||i.current))if(o in a.current)l(a.current[o]);else try{const e=await u(o);if(e){const{items:t}=e;a.current[o]=t,l(t)}}catch(t){if("Resource call aborted"===t)return;throw t}i.current||(i.current=!0)})()},[o]),s}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/PinSaveButtonCommon-40a712bdff1a562e2d42.mjs.map